<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#1c64f2"/><meta name="apple-mobile-web-app-title" content="Mohit Singh"/><meta name="application-name" content="Mohit Singh"/><meta name="msapplication-TileColor" content="#2d89ef"/><meta name="theme-color" content="#ffffff"/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Story of njk, a tool mistreated | Blog of Mohit Singh</title><meta name="description" content="In 2014, I decide to build static websites for others in need, voluntarily. I didn&#x27;t know much about web technologies but after a little research, I found that static-site-generators were a thing."/><link href="https://mohitsingh.in/sitemap.xml" rel="sitemap" type="application/xml" title="Sitemap"/><meta content="wmG9n4x_BUWryqpD2K4wEF9Edfh_LNapQe-qfbv4D3o" name="google-site-verification"/><link rel="canonical" href="https://mohitsingh.in/code/njk"/><meta name="next-head-count" content="7"/><link rel="preload" href="/_next/static/css/17108455eac6aad5c488.css" as="style"/><link rel="stylesheet" href="/_next/static/css/17108455eac6aad5c488.css" data-n-g=""/><link rel="preload" href="/_next/static/css/e1fe27d84a18852b7129.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e1fe27d84a18852b7129.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="/_next/static/chunks/webpack-715feba1dbc96f0c4f3f.js" defer=""></script><script src="/_next/static/chunks/framework-2191d16384373197bc0a.js" defer=""></script><script src="/_next/static/chunks/main-b9780dc6f4fa7abb3771.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d164e74ceea89891f9ba.js" defer=""></script><script src="/_next/static/chunks/pages/%5B...posts%5D-68cf0e6a6b64b0c1d37b.js" defer=""></script><script src="/_next/static/vLj-h1l1iYxo80BnxHitK/_buildManifest.js" defer=""></script><script src="/_next/static/vLj-h1l1iYxo80BnxHitK/_ssgManifest.js" defer=""></script></head><body><div id="__next"><main class="flex flex-col flex-grow flex-shrink-0"><article class="w-full px-4 py-24" itemID="#" itemscope="" itemType="http://schema.org/BlogPosting"><header class="w-full mx-auto mb-12 text-center md:w-2/3"><h1 class="mb-3 text-4xl font-bold text-gray-700 md:leading-tight md:text-5xl" itemProp="headline" title="Story of njk, a tool mistreated">Story of njk, a tool mistreated</h1><p class="text-xs text-gray-600 md:text-sm">Written by<span class="font-medium text-gray-700" itemProp="author" itemscope="" itemType="http://schema.org/Person"><span itemProp="name"> <!-- -->Mohit Singh<!-- --> </span></span>on <time itemProp="datePublished dateModified" dateTime="Sat Aug 07 2021" pubdate="true">Sat Aug 07 2021</time></p></header><section class="mx-auto prose"><p>In 2014, I decide to build static websites for others in need, voluntarily. I didn't know much about web technologies but after a little research (googling ?) I found that static-site-generators were a thing. I spent next few months teaching myself web stuff. Next, I was looking for a good static site generator to utilize this newly gained knowledge.</p>
<h2>From Jekyll to njk</h2>
<p>I decide to use Jekyll <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> and built those websites with it. Jekyll has a templating/markup language named liquid. I got familiar with markdown, yaml and templating languages. It was working fine until one day, I decided to move to something else due to some limitations. Also, Jekyll required ruby along with ruby devkit which I really didn't like. I learned about gulp <a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> and nunjucks, a templating language similar to liquid and decided to build old sites with these new tools. Node felt simple and easy to use.</p>
<p>After putting together a few gulp plugins to replicate Jekyll like structure, I was able to move away from Jekyll, but not completely. The plugin I used to render nunjucks needed 3 other plugins in order to support front-matter and external data. This didn't feel right to me. I forked original plugin and added markdown and front-matter support to it. It got some community adoption and I learned that same problem was with a lot of other plugin users. I was happy that I helped others.</p>
<p>Soon after, I abstracted away my gulp-config as a module and named it njk. It was njk v1, a gulp config to build static-sites. After a while I wanted to optimize my slow build process and huge dependency tree. I rewrote njk as a command line tool to render nunjucks with markdown, front-matter and external data and released as njk v2. I deprecated the gulp-plugin after a while since I was no longer maintaining it and deleted afterwards.</p>
<h2>A tool mistreated</h2>
<p>Fast forwards to some years, I kept maintaining njk since I was building all my sites with it. It got some adoption but wasn't much popular. By now, I was good enough in React and with time, migrated those sites to Next. njk was in good shape and in maintainence mode at this point. A few months ago, during a random lookup, I landed in a project that used njk as dependency. I got curious how they used it. What I found next was shocking. They used njk just to have nunjucks as a dependency. My guess was that njk sounded official and some people downloaded it instead of nunjucks library. It worked since njk was depending on nunjucks.</p>
<p>A facepalm later, I decide to dig deeper. After looking into some dependent projects, I found that most of them had njk but they actually intended to use nunjucks directly. It was okay that njk wasn't much used, but finding out that most of existing users were misusers was hilarious. They intended bananas but ended up with a gorilla with bananas and the whole circus around it <a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>. For those who are curious about this tiny tool, <a href="https://github.com/mohitsinghs/njk" rel="nofollow noopener noreferrer">here</a> it is.</p>
<h2>Conclusion</h2>
<p>We are installing dependencies so mindlessly nowadays that something like this can happen frequently and I witnessed it in my previous job. I have no idea how to solve this and I've already stopped using that tool but if njk were a person, I can imagine him complaining - "They are doing weird thing with me".</p>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn1" role="doc-endnote">A static site generator written in Ruby.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩</a></li>
<li id="fn2" role="doc-endnote">A build tool written in javascript<a href="#fnref2" class="footnote-back" role="doc-backlink">↩</a></li>
<li id="fn3" role="doc-endnote">nunjucks is way lighter than njk since former is a library and later is a command line tool for specific job<a href="#fnref3" class="footnote-back" role="doc-backlink">↩</a></li>
</ol>
</section>
</section></article></main><footer class="w-full py-4 text-center"><p class="text-xs text-gray-700">Copyright © 2021 Mohit Singh</p></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"Code","posts":[{"title":"A distributed link shortener","author":"Mohit Singh","date":"2021-09-04","excerpt":"In my post about building building link-shortener, I discussed about how I attempted to build a fully functional link shortener. That worked well but I was left with several questions during my previous attempt.","slug":"a-distributed-link-shortner","link":"code/a-distributed-link-shortner"},{"title":"On frontend tooling","author":"Mohit Singh","date":"2021-08-21","excerpt":"One thing I keep saying to people, Love it or hate it but it's still in your mind.. Same happens with me and frontend tooling. When I started creating websites and was recovering from my android madness, the state of frontend tooling was way more complex than today.","slug":"on-frontend-tooling","link":"code/on-frontend-tooling"},{"title":"Laws for Software Engineers","author":"Mohit Singh","date":"2021-08-12","excerpt":"Software Engineering is not always fun and sometimes we face results we never except. And then, there exits a whole set of principles and laws people came up with over time to answer these failures and patterns.","slug":"laws-for-software-engineers","link":"code/laws-for-software-engineers"},{"title":"Story of njk, a tool mistreated","author":"Mohit Singh","date":"2021-08-07","excerpt":"In 2014, I decide to build static websites for others in need, voluntarily. I didn't know much about web technologies but after a little research, I found that static-site-generators were a thing.","slug":"njk","link":"code/njk"},{"title":"Building a link shortener","author":"Mohit Singh","date":"2021-07-26","excerpt":"A while back, I was asked to write a link shortener for a startup. It took me a day to come up with a production ready version but I warned them about collisions and other possible limitations.","slug":"building-a-link-shortner","link":"code/building-a-link-shortner"},{"title":"Not The Tailwind Way","author":"Mohit Singh","date":"2021-07-25","excerpt":"I love Tailwind and it solves a lot of pain points I had writing CSS. The problem is, it pollutes my HTML well beyond refactoring and I've to be lucky to get something broken fixed.","slug":"no-tailwind","link":"code/no-tailwind"},{"title":"Hello","author":"Mohit Singh","date":"2021-07-21","excerpt":"I tried blogging a few times during last 8 years, but ended up stopping, but now I finally feel like I have courage to write things in my mind.","slug":"hello","link":"code/hello"}],"post":{"title":"Story of njk, a tool mistreated","author":"Mohit Singh","date":"2021-08-07","excerpt":"In 2014, I decide to build static websites for others in need, voluntarily. I didn't know much about web technologies but after a little research, I found that static-site-generators were a thing.","slug":"njk","link":"code/njk","content":"\u003cp\u003eIn 2014, I decide to build static websites for others in need, voluntarily. I didn't know much about web technologies but after a little research (googling ?) I found that static-site-generators were a thing. I spent next few months teaching myself web stuff. Next, I was looking for a good static site generator to utilize this newly gained knowledge.\u003c/p\u003e\n\u003ch2\u003eFrom Jekyll to njk\u003c/h2\u003e\n\u003cp\u003eI decide to use Jekyll \u003ca href=\"#fn1\" class=\"footnote-ref\" id=\"fnref1\" role=\"doc-noteref\"\u003e\u003csup\u003e1\u003c/sup\u003e\u003c/a\u003e and built those websites with it. Jekyll has a templating/markup language named liquid. I got familiar with markdown, yaml and templating languages. It was working fine until one day, I decided to move to something else due to some limitations. Also, Jekyll required ruby along with ruby devkit which I really didn't like. I learned about gulp \u003ca href=\"#fn2\" class=\"footnote-ref\" id=\"fnref2\" role=\"doc-noteref\"\u003e\u003csup\u003e2\u003c/sup\u003e\u003c/a\u003e and nunjucks, a templating language similar to liquid and decided to build old sites with these new tools. Node felt simple and easy to use.\u003c/p\u003e\n\u003cp\u003eAfter putting together a few gulp plugins to replicate Jekyll like structure, I was able to move away from Jekyll, but not completely. The plugin I used to render nunjucks needed 3 other plugins in order to support front-matter and external data. This didn't feel right to me. I forked original plugin and added markdown and front-matter support to it. It got some community adoption and I learned that same problem was with a lot of other plugin users. I was happy that I helped others.\u003c/p\u003e\n\u003cp\u003eSoon after, I abstracted away my gulp-config as a module and named it njk. It was njk v1, a gulp config to build static-sites. After a while I wanted to optimize my slow build process and huge dependency tree. I rewrote njk as a command line tool to render nunjucks with markdown, front-matter and external data and released as njk v2. I deprecated the gulp-plugin after a while since I was no longer maintaining it and deleted afterwards.\u003c/p\u003e\n\u003ch2\u003eA tool mistreated\u003c/h2\u003e\n\u003cp\u003eFast forwards to some years, I kept maintaining njk since I was building all my sites with it. It got some adoption but wasn't much popular. By now, I was good enough in React and with time, migrated those sites to Next. njk was in good shape and in maintainence mode at this point. A few months ago, during a random lookup, I landed in a project that used njk as dependency. I got curious how they used it. What I found next was shocking. They used njk just to have nunjucks as a dependency. My guess was that njk sounded official and some people downloaded it instead of nunjucks library. It worked since njk was depending on nunjucks.\u003c/p\u003e\n\u003cp\u003eA facepalm later, I decide to dig deeper. After looking into some dependent projects, I found that most of them had njk but they actually intended to use nunjucks directly. It was okay that njk wasn't much used, but finding out that most of existing users were misusers was hilarious. They intended bananas but ended up with a gorilla with bananas and the whole circus around it \u003ca href=\"#fn3\" class=\"footnote-ref\" id=\"fnref3\" role=\"doc-noteref\"\u003e\u003csup\u003e3\u003c/sup\u003e\u003c/a\u003e. For those who are curious about this tiny tool, \u003ca href=\"https://github.com/mohitsinghs/njk\" rel=\"nofollow noopener noreferrer\"\u003ehere\u003c/a\u003e it is.\u003c/p\u003e\n\u003ch2\u003eConclusion\u003c/h2\u003e\n\u003cp\u003eWe are installing dependencies so mindlessly nowadays that something like this can happen frequently and I witnessed it in my previous job. I have no idea how to solve this and I've already stopped using that tool but if njk were a person, I can imagine him complaining - \"They are doing weird thing with me\".\u003c/p\u003e\n\u003csection class=\"footnotes\" role=\"doc-endnotes\"\u003e\n\u003chr\u003e\n\u003col\u003e\n\u003cli id=\"fn1\" role=\"doc-endnote\"\u003eA static site generator written in Ruby.\u003ca href=\"#fnref1\" class=\"footnote-back\" role=\"doc-backlink\"\u003e↩\u003c/a\u003e\u003c/li\u003e\n\u003cli id=\"fn2\" role=\"doc-endnote\"\u003eA build tool written in javascript\u003ca href=\"#fnref2\" class=\"footnote-back\" role=\"doc-backlink\"\u003e↩\u003c/a\u003e\u003c/li\u003e\n\u003cli id=\"fn3\" role=\"doc-endnote\"\u003enunjucks is way lighter than njk since former is a library and later is a command line tool for specific job\u003ca href=\"#fnref3\" class=\"footnote-back\" role=\"doc-backlink\"\u003e↩\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/section\u003e\n"}},"__N_SSG":true},"page":"/[...posts]","query":{"posts":["code","njk"]},"buildId":"vLj-h1l1iYxo80BnxHitK","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>